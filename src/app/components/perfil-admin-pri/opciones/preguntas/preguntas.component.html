<div class="preguntas-container w-full max-w-full">
  <h2 class="text-2xl font-bold text-gray-800 mb-6">Gestión de Preguntas</h2>

  <!-- Pestañas -->
  <div class="mb-6 border-b border-gray-200">
    <nav class="flex space-x-8" aria-label="Tabs">
      <button 
        type="button" 
        (click)="selectTab('tabla')" 
        [ngClass]="activeTab === 'tabla' ? 'tab-active' : 'tab-inactive'"
        class="whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm rounded-t-lg transition-all duration-200 ease-in-out"
        role="tab" 
        [attr.aria-selected]="activeTab === 'tabla'"
      >
        <i class="fas fa-table mr-2"></i> Tabla de Preguntas
      </button>
      <button 
        type="button" 
        (click)="selectTab('nuevo')" 
        [ngClass]="activeTab === 'nuevo' ? 'tab-active' : 'tab-inactive'"
        class="whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm rounded-t-lg transition-all duration-200 ease-in-out"
        role="tab" 
        [attr.aria-selected]="activeTab === 'nuevo'"
      >
        <i class="fas fa-plus mr-2"></i> Nueva Pregunta
      </button>
    </nav>
  </div>

  <div class="tab-content">
    <!-- Panel: Tabla de Preguntas -->
    @if (activeTab === 'tabla') {
      <div role="tabpanel" class="tab-panel animate-fadeIn">
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
          <div class="p-4 border-b border-gray-200">
            <div class="flex flex-col sm:flex-row sm:items-end gap-4 w-full">
              <div class="flex flex-col sm:flex-row sm:items-end gap-4 w-full">
                <!-- Buscador -->
                <div class="w-full sm:w-56">
                  <label for="searchPregunta" class="block text-sm font-medium text-gray-700 mb-2">Buscar Pregunta:</label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <i class="fas fa-search text-gray-400"></i>
                    </div>
                    <input 
                      id="searchPregunta" 
                      type="text" 
                      [(ngModel)]="searchTerm" 
                      (input)="filterPreguntas()" 
                      placeholder="Ingrese texto"
                      class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm" 
                    />
                  </div>
                </div>
                
                <!-- Filtro Nivel -->
                <div class="w-full sm:w-48">
                  <label for="filtroNivel" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Nivel:</label>
                  <select 
                    id="filtroNivel" 
                    [(ngModel)]="filtroNivel" 
                    (change)="onNivelChange()" 
                    class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (nivel of niveles; track nivel) {
                      <option [value]="nivel.id_nivel">{{ nivel.nombre }}</option>
                    }
                  </select>
                </div>
                
                <!-- Filtro Grado -->
                <div class="w-full sm:w-48">
                  <label for="filtroGrado" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Grado:</label>
                  <select 
                    id="filtroGrado" 
                    [(ngModel)]="filtroGrado" 
                    (change)="onGradoChange()" 
                    class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (grado of grados; track grado) {
                      <option [value]="grado.id_grado">{{ grado.nombre }}</option>
                    }
                  </select>
                </div>
                
                <!-- Filtro Curso -->
                <div class="w-full sm:w-48">
                  <label for="filtroCurso" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Curso:</label>
                  <select 
                    id="filtroCurso" 
                    [(ngModel)]="filtroCurso" 
                    (change)="onCursoChange()" 
                    class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (curso of cursos; track curso) {
                      <option [value]="curso.id_curso">{{ curso.id_curso }}-{{ curso.nombre }}</option>
                    }
                  </select>
                </div>
                
                <!-- Selector Cuestionario -->
                <div class="w-full sm:w-56">
                  <label for="selectorCuestionario" class="block text-sm font-medium text-gray-700 mb-2">Cuestionario:</label>
                  <select 
                    id="selectorCuestionario" 
                    [(ngModel)]="selectedCuestionario" 
                    (change)="filterPreguntas()" 
                    class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (c of filteredCuestionarios; track c) {
                      <option [value]="c.id_cuestionario">{{ c.titulo }}</option>
                    }
                  </select>
                </div>
              </div>
              
              <!-- Botón Nueva Pregunta -->
              <div class="flex-shrink-0">
                <button 
                  type="button" 
                  (click)="selectTab('nuevo')"
                  class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"
                >
                  <i class="fas fa-plus mr-2"></i> Nueva Pregunta
                </button>
              </div>
            </div>
          </div>
          
          <!-- Tabla de preguntas -->
          <div class="overflow-x-auto">
            <table class="preguntas-table min-w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Enunciado</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                  <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                  <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                @for (pregunta of paginatedPreguntas; track pregunta) {
                  <tr class="hover:bg-gray-50 transition-colors duration-150">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ pregunta.id_pregunta }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                      <div [innerHTML]="pregunta.enunciado" class="max-w-md"></div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ pregunta.tipo_pregunta || '-' }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium">
                      <span 
                        [ngClass]="pregunta.estado ? 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800' : 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800'"
                      >
                        {{ pregunta.estado ? 'Activo' : 'Inactivo' }}
                      </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium">
                      <div class="flex justify-center space-x-2">
                        <button 
                          type="button" 
                          (click)="viewPregunta(pregunta.id_pregunta!)" 
                          class="text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-50 transition-all duration-150" 
                          title="Ver pregunta"
                        >
                          <i class="fas fa-eye"></i>
                        </button>
                        <button 
                          type="button" 
                          (click)="editPregunta(pregunta.id_pregunta!)" 
                          class="text-yellow-600 hover:text-yellow-900 p-1 rounded-full hover:bg-yellow-50 transition-all duration-150" 
                          title="Editar"
                        >
                          <i class="fas fa-edit"></i>
                        </button>
                        <button 
                          type="button" 
                          (click)="deletePregunta(pregunta.id_pregunta!)" 
                          class="text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50 transition-all duration-150" 
                          title="Eliminar"
                        >
                          <i class="fas fa-trash"></i>
                        </button>
                        <button 
                          type="button" 
                          (click)="detailPregunta(pregunta.id_pregunta!)" 
                          class="text-purple-600 hover:text-purple-900 p-1 rounded-full hover:bg-purple-50 transition-all duration-150" 
                          title="Detalle"
                        >
                          <i class="fas fa-info-circle"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                }
                
                <!-- Estado vacío -->
                @if (paginatedPreguntas.length === 0) {
                  <tr>
                    <td colspan="5" class="px-6 py-12 text-center text-sm text-gray-500">
                      <div class="flex flex-col items-center">
                        <i class="fas fa-layer-group text-4xl text-gray-300 mb-4"></i>
                        <p class="text-lg font-medium text-gray-900 mb-2">No hay preguntas</p>
                        <p class="text-gray-500">{{ searchTerm ? 'No se encontraron resultados para tu búsqueda.' : 'Comienza agregando tu primera pregunta.' }}</p>
                      </div>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
          
          <!-- Paginación -->
          @if (filteredPreguntas.length > itemsPerPage) {
            <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
              <div class="flex items-center justify-between">
                <div class="flex-1 flex justify-between sm:hidden">
                  <button 
                    (click)="onPageChange(currentPage - 1)" 
                    [disabled]="currentPage === 1"
                    class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    Anterior
                  </button>
                  <button 
                    (click)="onPageChange(currentPage + 1)" 
                    [disabled]="currentPage === Math.ceil(filteredPreguntas.length/itemsPerPage)"
                    class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    Siguiente
                  </button>
                </div>
                
                <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                  <div>
                    <p class="text-sm text-gray-700">
                      Mostrando
                      <span class="font-medium">{{ (currentPage - 1) * itemsPerPage + 1 }}</span>
                      a
                      <span class="font-medium">{{ Math.min(currentPage * itemsPerPage, filteredPreguntas.length) }}</span>
                      de
                      <span class="font-medium">{{ filteredPreguntas.length }}</span>
                      resultados
                    </p>
                  </div>
                  
                  <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Paginación">
                    @for (page of getPagesArray(); track page; let i = $index) {
                      <button 
                        (click)="onPageChange(i + 1)" 
                        [class]="currentPage === i + 1 ? 'z-10 bg-green-50 border-green-500 text-green-600' : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'"
                        class="relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors duration-150"
                      >
                        {{ i + 1 }}
                      </button>
                    }
                  </nav>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    }

    <!-- Panel: Nueva Pregunta -->
    @if (activeTab === 'nuevo') {
      <div role="tabpanel" class="tab-panel animate-fadeIn">
        <div class="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <form [formGroup]="preguntaForm" (ngSubmit)="onSubmit()" class="space-y-6">
            <div class="space-y-4">
              <h2 class="text-xl font-semibold text-gray-700">Datos de la Pregunta</h2>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- 01 Cuestionario -->
                <div>
                  <label for="id_cuestionario" class="block text-sm font-medium text-gray-700 mb-1">Cuestionario <span class="text-red-500">*</span></label>
                  <select 
                    id="id_cuestionario" 
                    formControlName="id_cuestionario"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (c of filteredCuestionarios; track c) {
                      <option [value]="c.id_cuestionario">{{ c.titulo }}</option>
                    }
                  </select>
                </div>
                
                <!-- 02 Tipo de Pregunta -->
                <div>
                  <label for="tipo_pregunta" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Pregunta <span class="text-red-500">*</span></label>
                  <select 
                    id="tipo_pregunta" 
                    formControlName="tipo_pregunta"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                  >
                    <option value="">[Seleccionar]</option>
                    @for (tipo of tiposPregunta; track tipo) {
                      <option [value]="tipo.id_tipo_pregunta">{{ tipo.nombre }}</option>
                    }
                  </select>
                </div>

                <!-- 03 Enunciado (ancho completo) -->
                <div>
                  <label for="enunciado" class="block text-sm font-medium text-gray-700 mb-1">Enunciado <span class="text-red-500">*</span></label>
                  <textarea 
                    id="enunciado" 
                    formControlName="enunciado" 
                    rows="6" 
                    placeholder="Enunciado de la pregunta"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                  ></textarea>
                </div>                

                <!-- 04 Puntaje -->
                <div>
                  <label for="puntaje" class="block text-sm font-medium text-gray-700 mb-1">Puntaje <span class="text-red-500">*</span></label>
                  <input 
                    type="number" 
                    id="puntaje" 
                    formControlName="puntaje" 
                    placeholder="Puntaje de la pregunta"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" 
                  />
                </div>
                
                <!-- 05 Orden -->
                <div>
                  <label for="orden" class="block text-sm font-medium text-gray-700 mb-1">Orden <span class="text-red-500">*</span></label>
                  <input 
                    type="number" 
                    id="orden" 
                    formControlName="orden" 
                    placeholder="Orden de la pregunta"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" 
                  />
                </div>
                
                <!-- 06 Estado -->
                <div>
                  <label for="estado" class="block text-sm font-medium text-gray-700 mb-1">Estado <span class="text-red-500">*</span></label>
                  <select 
                    id="estado" 
                    formControlName="estado"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                  >
                    <option [value]="true">Activo</option>
                    <option [value]="false">Inactivo</option>
                  </select>
                </div>
              </div>
              

            </div>
            
            <!-- Botones de acción -->
            <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
              <button 
                type="button" 
                (click)="selectTab('tabla')" 
                class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"
              >
                <i class="fas fa-times mr-2"></i> Cancelar
              </button>
              <button 
                type="submit"
                class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"
              >
                <i class="fas fa-save mr-2"></i> Guardar Pregunta
              </button>
            </div>
          </form>

          <hr class="my-4 border-gray-600" />

          <!-- Preguntas Nueva Ejemplos -->
          <div role="tabpanel" class="tab-panel animate-fadeIn">
            <h2 class="text-xl font-semibold text-gray-700">Preguntas Nuevas - Ejemplos</h2>
            <div class="pregunta-form-container bg-white rounded-lg shadow-md p-6 mt-6 border border-gray-200">
              <!-- Selector de Tipo de Pregunta -->
              <div class="tipo-pregunta-selector mb-4">
                <label class="block text-sm font-bold text-blue-700 mb-1">Tipo de Pregunta:</label>
                <select [(ngModel)]="tipoPreguntaSeleccionado" (change)="cambiarTipoPregunta()"class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                  <option value="" selected>Seleccione el tipo de pregunta</option>
                  <option value="VALOR">Respuesta corta/Valor numérico</option>
                  <option value="SELECCION">Opción múltiple</option>
                  <option value="RELACION">Emparejamiento/Relación</option>
                  <option value="EVALUATIVO_TEXTO">Desarrollo/Ensayo</option>
                  <option value="EVALUATIVO_ARCHIVO">Subir archivo</option>
                </select>
              </div>

              <hr class="my-4 border-gray-600" />

              <!-- Campos comunes a todos los tipos -->
              <div class="campos-comunes grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <h2 class="text-xl font-bold text-blue-700 col-span-1 md:col-span-3">«Campos comunes»</h2>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Título de la pregunta:</label>
                  <input type="text" placeholder="Título de la pregunta" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Enunciado de la pregunta:</label>
                  <textarea placeholder="Enunciado de la pregunta" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"></textarea>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Puntaje:</label>
                  <input type="number" placeholder="Puntaje" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                </div>
              </div>

              <hr class="my-4 border-gray-600" />

              <!-- Contenedor dinámico según el tipo de pregunta -->
              <div [ngSwitch]="tipoPreguntaSeleccionado">

                <!-- VALOR: Respuesta corta/numérica -->
                <div *ngSwitchCase="'VALOR'" class="tipo-valor mb-6">
                  <div class="respuesta-correcta mb-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Respuesta correcta:</label>
                    <input type="text" [(ngModel)]="pregunta.respuestaCorrecta"
                          placeholder="Ingrese la respuesta correcta"
                          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                  </div>
                  <div class="tipo-respuesta">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de respuesta:</label>
                    <select [(ngModel)]="pregunta.tipoRespuesta"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                      <option value="texto">Texto</option>
                      <option value="numero">Número</option>
                    </select>
                  </div>
                </div>

                <!-- SELECCION: Opción múltiple -->
                <div *ngSwitchCase="'SELECCION'" class="tipo-seleccion mb-6">
                  <div class="opciones-container mb-2">
                    <label class="text-sm font-semibold text-gray-700 mb-2">Opciones de respuesta:</label>
                    <div *ngFor="let opcion of pregunta.opciones; let i = index" class="opcion-item flex items-center gap-2 mb-2">
                      <input type="text" [(ngModel)]="opcion.texto"
                            [placeholder]="'Opción ' + (i + 1)"
                            class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                      <label class="flex items-center gap-1 text-sm">
                        <input type="checkbox" [(ngModel)]="opcion.correcta" class="form-checkbox text-green-600" />
                        Correcta
                      </label>
                      <button type="button" (click)="eliminarOpcion(i)"
                              class="px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200">Eliminar</button>
                    </div>
                    <button type="button" (click)="agregarOpcion()"
                            class="px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200">+ Agregar opción</button>
                  </div>
                  <div class="configuracion-seleccion">
                    <label class="flex items-center gap-2 text-sm">
                      <input type="checkbox" [(ngModel)]="pregunta.multiple" class="form-checkbox text-green-600" />
                      Permite múltiples respuestas correctas
                    </label>
                  </div>
                </div>

                <!-- RELACION: Emparejamiento -->
                <div *ngSwitchCase="'RELACION'" class="tipo-relacion mb-6">
                  <label class="text-sm font-semibold text-gray-700 mb-2">Pares de relación:</label>
                  <div *ngFor="let par of pregunta.paresRelacion; let i = index" class="par-item flex items-center gap-2 mb-2">
                    <input type="text" [(ngModel)]="par.elementoA" placeholder="Elemento A"
                          class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                    <span class="text-gray-500">→</span>
                    <input type="text" [(ngModel)]="par.elementoB" placeholder="Elemento B"
                          class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                    <button type="button" (click)="eliminarPar(i)"
                            class="px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200">Eliminar</button>
                  </div>
                  <button type="button" (click)="agregarPar()"
                          class="px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200">+ Agregar par</button>
                </div>

                <!-- EVALUATIVO_TEXTO: Desarrollo/Ensayo -->
                <div *ngSwitchCase="'EVALUATIVO_TEXTO'" class="tipo-evaluativo-texto mb-6">
                  <label class="text-sm font-semibold text-gray-700 mb-2">Evaluativo Texto:</label>
                  <div class="configuracion-texto grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Longitud mínima de respuesta:</label>
                      <input type="number" [(ngModel)]="pregunta.longitudMinima" min="0"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Longitud máxima de respuesta:</label>
                      <input type="number" [(ngModel)]="pregunta.longitudMaxima" min="1"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                    </div>
                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-gray-700 mb-1">Rúbrica de evaluación:</label>
                      <textarea [(ngModel)]="pregunta.rubrica"
                                placeholder="Describa los criterios de evaluación..."
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"></textarea>
                    </div>
                  </div>
                </div>

                <!-- EVALUATIVO_ARCHIVO: Subir archivo -->
                <div *ngSwitchCase="'EVALUATIVO_ARCHIVO'" class="tipo-evaluativo-archivo mb-6">
                  <label class="text-sm font-semibold text-gray-700 mb-2">Evaluativo Archivo:</label>
                  <div class="configuracion-archivo grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Tipos de archivo permitidos:</label>
                      <select [(ngModel)]="pregunta.formatosPermitidos" multiple
                              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                        <option value="pdf">PDF</option>
                        <option value="doc">DOC/DOCX</option>
                        <option value="image">Imágenes (JPG, PNG)</option>
                        <option value="video">Video (MP4, AVI)</option>
                        <option value="audio">Audio (MP3, WAV)</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Tamaño máximo (MB):</label>
                      <input type="number" [(ngModel)]="pregunta.tamanoMaximo" min="1" max="100"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" />
                    </div>
                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-gray-700 mb-1">Instrucciones específicas:</label>
                      <textarea [(ngModel)]="pregunta.instrucciones"
                                placeholder="Instrucciones para la entrega del archivo..."
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"></textarea>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Botones de acción -->
              <div class="acciones flex gap-3 mt-4">
                <button type="button" (click)="guardarPregunta()"
                        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
                  Guardar Pregunta
                </button>
                <button type="button"
                        class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
                  Cancelar
                </button>
              </div>

            </div>

          </div>

        </div>

      </div>
    }

  </div>

</div>