<!-- Colegios Component HTML -->
<div class="colegios-container w-full max-w-full">
  <h2 class="text-2xl font-bold text-gray-800 mb-6">Gestión de Colegios</h2>

  <!-- ✅ PESTAÑAS OPTIMIZADAS CON TAILWIND CSS -->
  <div class="mb-6 border-b border-gray-200">
    <nav class="flex space-x-8" aria-label="Tabs">

      <!-- Pestaña 1: Tabla de Colegios -->
      <button
        type="button"
        (click)="activeTab = 'tabla'"
        [class]="activeTab === 'tabla'
          ? 'tab-active'
          : 'tab-inactive'"
        class="whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm rounded-t-lg transition-all duration-200 ease-in-out"
        role="tab"
        [attr.aria-selected]="activeTab === 'tabla'"
        >
        <i class="fas fa-table mr-2"></i>
        Tabla de Colegios
      </button>

      <!-- Pestaña 2: Nuevo Colegio -->
      <button
        type="button"
        (click)="activeTab = 'nuevo'"
        [class]="activeTab === 'nuevo'
          ? 'tab-active'
          : 'tab-inactive'"
        class="whitespace-nowrap py-2 px-4 border-b-2 font-medium text-sm rounded-t-lg transition-all duration-200 ease-in-out"
        role="tab"
        [attr.aria-selected]="activeTab === 'nuevo'"
        >
        <i class="fas fa-school mr-2"></i>
        Nuevo Colegio
      </button>

    </nav>
  </div>

  <!-- ✅ CONTENIDO DE LAS PESTAÑAS -->
  <div class="tab-content">

    <!-- Panel: Tabla de Colegios -->
    @if (activeTab === 'tabla') {
      <div
        role="tabpanel"
        class="tab-panel animate-fadeIn"
        [attr.aria-labelledby]="'tab-tabla'"
        >
        <!-- Encabezado con filtro y botón -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
          <div class="p-4 border-b border-gray-200">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
              <!-- Filtro de búsqueda -->
              <div class="flex flex-1 items-center gap-4">
                <div class="max-w-md w-full">
                  <label for="searchColegio" class="block text-sm font-medium text-gray-700 mb-2">
                    Buscar Colegio:
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <i class="fas fa-search text-gray-400"></i>
                    </div>
                    <input
                      id="searchColegio"
                      type="text"
                      [(ngModel)]="searchTerm"
                      (input)="filterColegios()"
                      placeholder="Ingrese nombre, dirección o teléfono"
                      class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm"
                      />
                    </div>
                  </div>
                  <!-- Filtro id_departamento -->
                  <div class="w-48">
                    <label for="filtroDepartamento" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Departamento:</label>
                    <select
                      id="filtroDepartamento"
                      [(ngModel)]="filtroDepartamento"
                      (change)="onDepartamentoChange()"
                      class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                      >
                      <option value="">[Seleccionar]</option>
                      @for (dep of departamentos; track dep) {
                        <option [value]="dep.departamento">{{ dep.departamento }}</option>
                      }
                    </select>
                  </div>
                  <!-- Filtro Provincia -->
                  <div class="w-48">
                    <label for="filtroProvincia" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Provincia:</label>
                    <select
                      id="filtroProvincia"
                      [(ngModel)]="filtroProvincia"
                      (change)="onProvinciaChange()"
                      class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                      >
                      <option value="">[Seleccionar]</option>
                      @for (prov of provincias; track prov) {
                        <option [value]="prov.provincia">{{ prov.provincia }}</option>
                      }
                    </select>
                  </div>
                  <!-- Filtro Distrito -->
                  <div class="w-48">
                    <label for="filtroDistrito" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Distrito:</label>
                    <select
                      id="filtroDistrito"
                      [(ngModel)]="filtroDistrito"
                      (change)="filterColegios()"
                      class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                      >
                      <option value="">[Seleccionar]</option>
                      @for (dist of distritos; track dist) {
                        <option [value]="dist.distrito">{{ dist.distrito }}</option>
                      }
                    </select>
                  </div>
                  <!-- Filtro Colegio Cliente -->
                  <div class="w-48">
                    <label for="filtroCliente" class="block text-sm font-medium text-gray-700 mb-2">Filtrar por Cliente:</label>
                    <select
                      id="filtroCliente"
                      [(ngModel)]="filtroCliente"
                      (change)="filterColegios()"
                      class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                      >
                      <option value="">Ambos</option>
                      <option value="true">Clientes</option>
                      <option value="false">No Clientes</option>
                    </select>
                  </div>
                </div>
                <!-- Botón Nuevo Colegio -->
                <div class="flex items-end">
                  <button
                    type="button"
                    (click)="activeTab = 'nuevo'"
                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"
                    >
                    <i class="fas fa-plus mr-2"></i>
                    Nuevo Colegio
                  </button>
                </div>
              </div>
            </div>
            <!-- Tabla de colegios -->
            <div class="overflow-x-auto">
              <table class="colegios-table">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Dirección</th>
                    <th scope="col">Correo</th>
                    <th scope="col">Cliente</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Acciones</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  @for (colegio of paginatedColegios; track trackByColegioId($index, colegio)) {
                    <tr class="hover:bg-gray-50 transition-colors duration-150">
                      <td class="px-6 py-1 whitespace-nowrap text-sm font-medium text-gray-900">{{ colegio.id_colegio }}</td>
                      <td class="px-6 py-1 whitespace-nowrap text-sm text-gray-900">{{ colegio.nombre }}</td>
                      <td class="px-6 py-1 whitespace-nowrap text-sm text-gray-900">{{ colegio.direccion }}</td>
                      <td class="px-6 py-1 whitespace-nowrap text-sm text-gray-900">{{ colegio.correo }}</td>
                      <td class="px-6 py-1 whitespace-nowrap text-sm text-gray-900">{{ colegio.colegio_cliente ? 'Cliente' : '' }}</td>
                      <td class="px-6 py-1.5 whitespace-nowrap">
                        <span
                    [class]="colegio.estado
                      ? 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800'
                      : 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800'"
                          >
                          {{ colegio.estado ? 'Activo' : 'Inactivo' }}
                        </span>
                      </td>
                      <td class="px-6 py-1.5 whitespace-nowrap text-center text-sm font-medium">
                        <div class="flex justify-center space-x-2">
                          <button
                            type="button"
                            (click)="viewColegio(colegio.id_colegio!)"
                            class="action-icon view"
                            title="Ver detalles"
                            >
                            <i class="fas fa-eye"></i>
                          </button>
                          <button
                            type="button"
                            (click)="editColegio(colegio.id_colegio!)"
                            class="action-icon edit"
                            title="Editar"
                            >
                            <i class="fas fa-edit"></i>
                          </button>
                          <button
                            type="button"
                            (click)="deleteColegio(colegio.id_colegio!)"
                            class="action-icon delete"
                            title="Eliminar"
                            >
                            <i class="fas fa-trash"></i>
                          </button>
                          <!--Icono Vista Docentes-->
                          <button
                            type="button"
                            (click)="viewDocentes(colegio.id_colegio!)"
                            class="text-green-600 hover:text-blue-900 p-1 rounded-full hover:bg-green-50 transition-all duration-150"
                            title="Docentes"
                            >
                            <i class="fas fa-info-circle"></i>
                          </button>
                          <!---->
                        </div>
                      </td>
                    </tr>
                  }
                  <!-- Estado vacío -->
                  @if (paginatedColegios.length === 0) {
                    <tr>
                      <td colspan="7" class="px-6 py-12 text-center text-sm text-gray-500">
                        <div class="flex flex-col items-center">
                          <i class="fas fa-school text-4xl text-gray-300 mb-4"></i>
                          <p class="text-lg font-medium text-gray-900 mb-2">No hay colegios</p>
                          <p class="text-gray-500">{{ searchTerm ? 'No se encontraron resultados para tu búsqueda.' : 'Comienza agregando tu primer colegio.' }}</p>
                        </div>
                      </td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
            <!-- Paginación -->
            @if (getTotalPages().length > 1) {
              <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
                <div class="flex items-center justify-between">
                  <div class="flex-1 flex justify-between sm:hidden">
                    <button
                      (click)="changePage(currentPage - 1)"
                      [disabled]="currentPage === 1"
                      class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                      >
                      Anterior
                    </button>
                    <button
                      (click)="changePage(currentPage + 1)"
                      [disabled]="currentPage === getTotalPages().length"
                      class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                      >
                      Siguiente
                    </button>
                  </div>
                  <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                    <div>
                      <p class="text-sm text-gray-700">
                        Mostrando
                        <span class="font-medium">{{ (currentPage - 1) * itemsPerPage + 1 }}</span>
                        a
                        <span class="font-medium">{{ Math.min(currentPage * itemsPerPage, filteredColegios.length) }}</span>
                        de
                        <span class="font-medium">{{ filteredColegios.length }}</span>
                        resultados
                      </p>
                    </div>
                    <div>
                      <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Paginación">
                        @for (page of getTotalPages(); track page; let i = $index) {
                          <button
                            (click)="changePage(i + 1)"
                    [class]="currentPage === i + 1
                      ? 'z-10 bg-green-50 border-green-500 text-green-600'
                      : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'"
                            class="relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors duration-150"
                            >
                            {{ i + 1 }}
                          </button>
                        }
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Panel: Nuevo Colegio -->
      @if (activeTab === 'nuevo') {
        <div
          role="tabpanel"
          class="tab-panel animate-fadeIn"
          [attr.aria-labelledby]="'tab-nuevo'"
          >
          <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200">
              <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">
                  {{ isEditing ? 'Editar Colegio' : 'Nuevo Colegio' }}
                </h3>
                <p class="mt-1 text-sm text-gray-500">
                  {{ isEditing ? 'Modifica la información del colegio' : 'Completa la información para crear un nuevo colegio' }}
                </p>
              </div>
              <form [formGroup]="colegioForm" (ngSubmit)="saveColegio()" class="p-6">
                <div class="space-y-6">
                  <!-- Nombre y Logo -->
                  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 space-y-6">
                      <!-- Nombre del Colegio -->
                      <div>
                        <label for="nombre" class="block text-sm font-medium text-gray-700 mb-2">Nombre del Colegio *</label>
                        <input
                          type="text"
                          id="nombre"
                          formControlName="nombre"
                          placeholder="Ingrese el nombre del colegio"
                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                          [class.border-red-300]="colegioForm.get('nombre')?.invalid && colegioForm.get('nombre')?.touched"
                          >
                          @if (colegioForm.get('nombre')?.invalid && colegioForm.get('nombre')?.touched) {
                            <div class="mt-1 text-sm text-red-600">
                              Este campo es requerido
                            </div>
                          }
                        </div>
                        <!-- Dirección -->
                        <div>
                          <label for="direccion" class="block text-sm font-medium text-gray-700 mb-2">Dirección *</label>
                          <input
                            type="text"
                            id="direccion"
                            formControlName="direccion"
                            placeholder="Ingrese la dirección completa"
                            class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                            [class.border-red-300]="colegioForm.get('direccion')?.invalid && colegioForm.get('direccion')?.touched"
                            >
                            @if (colegioForm.get('direccion')?.invalid && colegioForm.get('direccion')?.touched) {
                              <div class="mt-1 text-sm text-red-600">
                                Este campo es requerido
                              </div>
                            }
                          </div>
                        </div>
                        <!-- Logo del colegio -->
                        <div class="flex items-center justify-center">
                          <div class="text-center">
                            <img
                              src="/assets/images/logo-sanremo.png"
                              alt="Logo del colegio"
                              class="w-32 h-20 object-contain border-4 border-gray-200 shadow-sm mx-auto rounded"
                              >
                              <p class="mt-2 text-sm text-gray-500">Logo actual</p>
                              <div class="mt-2">
                                <label for="logo" class="block text-xs text-gray-700 mb-1">Cambiar Logo:</label>
                                <input
                                  id="logo"
                                  type="file"
                                  (change)="onLogoChange($event)"
                                  class="block w-full text-xs text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- Teléfono y Correo -->
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                              <label for="telefono" class="block text-sm font-medium text-gray-700 mb-2">Teléfono *</label>
                              <input
                                type="text"
                                id="telefono"
                                formControlName="telefono"
                                placeholder="123-456-7890"
                                class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                [class.border-red-300]="colegioForm.get('telefono')?.invalid && colegioForm.get('telefono')?.touched"
                                >
                                @if (colegioForm.get('telefono')?.invalid && colegioForm.get('telefono')?.touched) {
                                  <div class="mt-1 text-sm text-red-600">
                                    Este campo es requerido
                                  </div>
                                }
                              </div>
                              <div>
                                <label for="correo" class="block text-sm font-medium text-gray-700 mb-2">Correo Electrónico *</label>
                                <input
                                  type="email"
                                  id="correo"
                                  formControlName="correo"
                                  placeholder="colegio@ejemplo.com"
                                  class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                  [class.border-red-300]="colegioForm.get('correo')?.invalid && colegioForm.get('correo')?.touched"
                                  >
                                  @if (colegioForm.get('correo')?.errors?.['required'] && colegioForm.get('correo')?.touched) {
                                    <div class="mt-1 text-sm text-red-600">
                                      El correo es obligatorio
                                    </div>
                                  }
                                  @if (colegioForm.get('correo')?.errors?.['email'] && colegioForm.get('correo')?.touched) {
                                    <div class="mt-1 text-sm text-red-600">
                                      Ingresa un correo válido
                                    </div>
                                  }
                                </div>
                              </div>
                              <!-- Página Web -->
                              <div>
                                <label for="website" class="block text-sm font-medium text-gray-700 mb-2">Página Web</label>
                                <input
                                  type="url"
                                  id="website"
                                  formControlName="website"
                                  placeholder="https://www.dominio.com"
                                  class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                  [class.border-red-300]="colegioForm.get('website')?.invalid && colegioForm.get('website')?.touched"
                                  >
                                  @if (colegioForm.get('website')?.errors?.['pattern'] && colegioForm.get('website')?.touched) {
                                    <div class="mt-1 text-sm text-red-600">
                                      Ingresa una URL válida
                                    </div>
                                  }
                                </div>
                                <!-- poblacion, Fundación y Estado -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                  <div>
                                    <label for="poblacion" class="block text-sm font-medium text-gray-700 mb-2">Población *</label>
                                    <input
                                      type="number"
                                      id="poblacion"
                                      formControlName="poblacion"
                                      placeholder="0"
                                      min="0"
                                      class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                      [class.border-red-300]="colegioForm.get('poblacion')?.invalid && colegioForm.get('poblacion')?.touched"
                                      >
                                      @if (colegioForm.get('poblacion')?.touched && colegioForm.get('poblacion')?.invalid) {
                                        <div class="mt-1 text-sm text-red-600">
                                          @if (colegioForm.get('poblacion')?.errors?.['required']) {
                                            <span>El poblacion es obligatorio</span>
                                          }
                                          @if (colegioForm.get('poblacion')?.errors?.['pattern']) {
                                            <span>Solo se permiten números</span>
                                          }
                                          @if (colegioForm.get('poblacion')?.errors?.['min']) {
                                            <span>Debe ser mayor o igual a 0</span>
                                          }
                                        </div>
                                      }
                                    </div>
                                    <div>
                                      <label for="fechafundacion" class="block text-sm font-medium text-gray-700 mb-2">Fecha de Fundación</label>
                                      <input
                                        type="date"
                                        id="fechafundacion"
                                        formControlName="fechafundacion"
                                        class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                        [class.border-red-300]="colegioForm.get('fechafundacion')?.invalid && colegioForm.get('fechafundacion')?.touched"
                                        >
                                      </div>
                                      <div>
                                        <label for="estado" class="block text-sm font-medium text-gray-700 mb-2">Estado *</label>
                                        <select
                                          id="estado"
                                          formControlName="estado"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          [class.border-red-300]="colegioForm.get('estado')?.invalid && colegioForm.get('estado')?.touched"
                                          >
                                          <option value="">Seleccione estado</option>
                                          <option [ngValue]="true">Activo</option>
                                          <option [ngValue]="false">Inactivo</option>
                                        </select>
                                        @if (colegioForm.get('estado')?.invalid && colegioForm.get('estado')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Por favor selecciona un estado
                                          </div>
                                        }
                                      </div>
                                      <div>
                                        <label for="colegio_cliente" class="block text-sm font-medium text-gray-700 mb-2">Colegio Cliente *</label>
                                        <select
                                          id="colegio_cliente"
                                          formControlName="colegio_cliente"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                                          [class.border-red-300]="colegioForm.get('colegio_cliente')?.invalid && colegioForm.get('colegio_cliente')?.touched"
                                          >
                                          <option [ngValue]="false">No</option>
                                          <option [ngValue]="true">Sí</option>
                                        </select>
                                        @if (colegioForm.get('colegio_cliente')?.invalid && colegioForm.get('colegio_cliente')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Por favor selecciona si el colegio es cliente
                                          </div>
                                        }
                                      </div>
                                    </div>
                                    <!-- Ubicación: id_departamento, Provincia y Distrito (dinámica dependiente, SOLO en formulario) -->
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                      <div>
                                        <label for="id_departamento" class="block text-sm font-medium text-gray-700 mb-2">id_departamento *</label>
                                        <select
                                          id="id_departamento"
                                          formControlName="id_departamento"
                                          (change)="onDepartamentoFormChange()"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          [class.border-red-300]="colegioForm.get('id_departamento')?.invalid && colegioForm.get('id_departamento')?.touched"
                                          >
                                          <option value="">Seleccione id_departamento</option>
                                          @for (dep of departamentos; track dep) {
                                            <option [ngValue]="dep.departamento">{{dep.departamento}}</option>
                                          }
                                        </select>
                                        @if (colegioForm.get('id_departamento')?.invalid && colegioForm.get('id_departamento')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Este campo es requerido
                                          </div>
                                        }
                                      </div>
                                      <div>
                                        <label for="provincia" class="block text-sm font-medium text-gray-700 mb-2">Provincia *</label>
                                        <select
                                          id="provincia"
                                          formControlName="provincia"
                                          (change)="onProvinciaFormChange()"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          [class.border-red-300]="colegioForm.get('provincia')?.invalid && colegioForm.get('provincia')?.touched"
                                          >
                                          <option value="">Seleccione provincia</option>
                                          @for (prov of provincias; track prov) {
                                            <option [ngValue]="prov.provincia">{{prov.provincia}}</option>
                                          }
                                        </select>
                                        @if (colegioForm.get('provincia')?.invalid && colegioForm.get('provincia')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Este campo es requerido
                                          </div>
                                        }
                                      </div>
                                      <div>
                                        <label for="distrito" class="block text-sm font-medium text-gray-700 mb-2">Distrito *</label>
                                        <select
                                          id="distrito"
                                          formControlName="distrito"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          [class.border-red-300]="colegioForm.get('distrito')?.invalid && colegioForm.get('distrito')?.touched"
                                          >
                                          <option value="">Seleccione distrito</option>
                                          @for (dist of distritos; track dist) {
                                            <option [ngValue]="dist.distrito">{{dist.distrito}}</option>
                                          }
                                        </select>
                                        @if (colegioForm.get('distrito')?.invalid && colegioForm.get('distrito')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Este campo es requerido
                                          </div>
                                        }
                                      </div>
                                    </div>
                                    <!-- Niveles y Turnos -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                      <div>
                                        <label for="niveles" class="block text-sm font-medium text-gray-700 mb-2">Niveles Educativos *</label>
                                        <select
                                          id="niveles"
                                          formControlName="niveles"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          multiple
                                          size="3"
                                          [class.border-red-300]="colegioForm.get('niveles')?.invalid && colegioForm.get('niveles')?.touched"
                                          >
                                          <option value="01">Inicial</option>
                                          <option value="02">Primaria</option>
                                          <option value="03">Secundaria</option>
                                        </select>
                                        <p class="mt-1 text-xs text-gray-500">Ctrl+Click para seleccionar varios</p>
                                        @if (colegioForm.get('niveles')?.invalid && colegioForm.get('niveles')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Selecciona al menos un nivel
                                          </div>
                                        }
                                      </div>
                                      <div>
                                        <label for="turnos" class="block text-sm font-medium text-gray-700 mb-2">Turnos *</label>
                                        <select
                                          id="turnos"
                                          formControlName="turnos"
                                          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                          multiple
                                          size="3"
                                          [class.border-red-300]="colegioForm.get('turnos')?.invalid && colegioForm.get('turnos')?.touched"
                                          >
                                          <option value="01">Mañana</option>
                                          <option value="02">Tarde</option>
                                          <option value="03">Noche</option>
                                        </select>
                                        <p class="mt-1 text-xs text-gray-500">Ctrl+Click para seleccionar varios</p>
                                        @if (colegioForm.get('turnos')?.invalid && colegioForm.get('turnos')?.touched) {
                                          <div class="mt-1 text-sm text-red-600">
                                            Selecciona al menos un turno
                                          </div>
                                        }
                                      </div>
                                    </div>
                                    <!-- Observaciones -->
                                    <div>
                                      <label for="observaciones" class="block text-sm font-medium text-gray-700 mb-2">Observaciones</label>
                                      <textarea
                                        id="observaciones"
                                        formControlName="observaciones"
                                        rows="3"
                                        placeholder="Ingrese observaciones adicionales..."
                                        class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm resize-none"
                                        [class.border-red-300]="colegioForm.get('observaciones')?.invalid && colegioForm.get('observaciones')?.touched"
                                      ></textarea>
                                    </div>
                                    <!-- Botones -->
                                    <div class="flex justify-end space-x-3 pt-6 border-t border-gray-200">
                                      <button
                                        type="button"
                                        (click)="resetForm(); activeTab = 'tabla'"
                                        class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors duration-200"
                                        >
                                        Cancelar
                                      </button>
                                      <button
                                        type="submit"
                                        [disabled]="colegioForm.invalid || loading"
                                        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"
                                        >
                                        @if (loading) {
                                          <i class="fas fa-spinner fa-spin mr-2"></i>
                                        }
                                        {{ isEditing ? 'Actualizar Colegio' : 'Crear Colegio' }}
                                      </button>
                                    </div>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </div>
                        }



                      </div>
                    </div>

                    <!-- Loading overlay -->
                    @if (loading) {
                      <div
                        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
                        role="dialog"
                        aria-label="Cargando"
                        >
                        <div class="bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4">
                          <div class="flex items-center space-x-3">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"></div>
                            <div>
                              <h3 class="text-lg font-medium text-gray-900">Procesando...</h3>
                              <p class="text-sm text-gray-500">Por favor espera un momento</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    }
